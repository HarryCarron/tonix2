<div class="w-100 h-100 d-flex" #envelopeContainer>
  <div class="flex-1">
  </div>
  <div  class="flex-1">
    <svg #svgContainer>



      <rect [attr.x]="PAD / 2" fill="#252c33" [attr.height]="availableHeight - (PAD / 2)" [attr.width]="availableWidth - (PAD)" rx="5" />

      <circle
        [ngClass]="{'off' : !isEditable}"
        #attackHandle
        [attr.cx]="PAD"
        [attr.cy]="lineBase"
        r="2"
        stroke="#fffd47"
        stroke-width="3"
        class="handle"
      />
      <text style="fill: #A9A9A9" [attr.y]="lineBase + 15" [attr.x]="PAD - 3">
        0
      </text>

        <path
          [ngClass]="{'line-off' : !isEditable}"
          [attr.d]="getAttackCurve()"
          stroke="white"
          fill="transparent"
          stroke-linecap="round"
          stroke-width="3"
          stroke="white"
        />

      <!-- attack end -->
      <!-- decay -->
      <circle
        [ngClass]="{'off' : !isEditable}"
        #decayHandle
        [attr.cx]="PAD + points[0]"
        [attr.cy]="PAD"
        r="2"
        stroke="#fffd47"
        stroke-width="3"
        class="handle"
      />


      <path
        [ngClass]="{'line-off' : !isEditable}"
        [attr.d]="getDecayCurve()"
        stroke="white"
        fill="transparent"
        stroke-linecap="round"
        stroke-width="3"
        stroke="white"
      />
      <!-- getReleaseCurve -->


      <!-- <line
        #decayLine
        [ngClass]="{'line-off' : !isEditable}"
        [attr.x1]="PAD + points[0]"
        [attr.y1]="PAD"
        [attr.x2]="PAD + points[1]"
        [attr.y2]="PAD + points[2]"
        stroke-linecap="round"
        stroke-width="3"
        stroke="white"
      /> -->

      <!-- decay end -->

      <!-- <line
      #attackLine
      [attr.x1]="points[1] + PAD"
      [attr.y1]="availableHeight - (PAD + 10)"
      [attr.x2]="points[1] + PAD"
      [attr.y2]="PAD"
      stroke-linecap="round"
      stroke-width="1"
      stroke="white"
      stroke-dasharray="1, 2"
    />
    <text [attr.x]="points[1] + PAD - 5" style="fill: #A9A9A9" [attr.y]="availableHeight - (PAD + 10) + 15">
      {{
        points[1] / this.secondWidth
      }}
    </text> -->
      <!-- decay end -->
      <!-- sustain -->
      <circle
        [ngClass]="{'off' : !isEditable}"
        #sustainHandle
        [attr.cx]="PAD + points[1]"
        [attr.cy]="PAD + points[2]"
        r="2"
        stroke="#fffd47"
        stroke-width="3"
        class="handle"
      />

      <line
        #sustainLine
        [ngClass]="{'line-off' : !isEditable}"
        [attr.x1]="PAD + points[1]"
        [attr.y1]="PAD + points[2]"
        [attr.x2]="PAD + sustainWidth"
        [attr.y2]="PAD + points[2]"
        stroke-linecap="round"
        stroke-width="3"
        stroke="white"
      />
      <!-- release -->
      <circle
        *ngIf="isEditable"
        #releaseHandle
        [attr.cx]="PAD + sustainWidth"
        [attr.cy]="PAD + points[2]"
        r="2"
        stroke="#fffd47"
        stroke-width="3"
        class="handle"
      />

      <!-- <line
        #releaseLine
        [ngClass]="{'line-off' : !isEditable}"
        [attr.x1]="PAD + this.sustainWidth"
        [attr.y1]="PAD + points[2]"
        [attr.x2]="PAD + points[3]"
        [attr.y2]="lineBase"
        stroke-linecap="round"
        stroke-width="3"
        stroke="white"
      /> -->

      <path
      [ngClass]="{'line-off' : !isEditable}"
      [attr.d]="getReleaseCurve()"
      stroke="white"
      fill="transparent"
      stroke-linecap="round"
      stroke-width="3"
      stroke="white"
    />

      <circle
        *ngIf="isEditable"
        [attr.cx]="PAD + points[3]"
        [attr.cy]="lineBase"
        r="2"
        stroke="#fffd47"
        stroke-width="3"
        class="handle"
      />
      <rect (click)="toggleCurve(0)" [attr.x]="PAD" [attr.y]="PAD" class="line-overlay" fill="#0074D9" [attr.height]="availableHeight - (PAD * 2 + 10)" [attr.width]="points[0]" rx="4" />
      <rect (click)="toggleCurve(1)" [attr.x]="PAD + points[0]" [attr.y]="PAD" class="line-overlay" fill="#0074D9" [attr.height]="availableHeight - (PAD * 2 + 10)" [attr.width]="points2[1]" rx="4" />
      <rect (click)="toggleCurve(2)" [attr.x]="PAD + sustainWidth" [attr.y]="PAD" class="line-overlay" fill="#0074D9" [attr.height]="availableHeight - (PAD * 2 + 10)" [attr.width]="sustainWidth + points2[2]" rx="4" />


  </svg>
  </div>




</div>
